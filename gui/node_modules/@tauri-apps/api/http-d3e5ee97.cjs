"use strict";var t,e=require("./tauri-5ddd82fd.cjs"),n=require("./tauri-29eed399.cjs");exports.ResponseType=void 0,(t=exports.ResponseType||(exports.ResponseType={}))[t.JSON=1]="JSON",t[t.Text=2]="Text",t[t.Binary=3]="Binary";var r=function(){function t(t,e){this.type=t,this.payload=e}return t.form=function(e){return new t("Form",e)},t.json=function(e){return new t("Json",e)},t.text=function(e){return new t("Text",e)},t.bytes=function(e){return new t("Bytes",e)},t}(),o=function(t){this.url=t.url,this.status=t.status,this.ok=this.status>=200&&this.status<300,this.headers=t.headers,this.data=t.data},i=function(){function t(t){this.id=t}return t.prototype.drop=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(t){return[2,n.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})]}))}))},t.prototype.request=function(t){return e.__awaiter(this,void 0,void 0,(function(){var r;return e.__generator(this,(function(e){return(r=!t.responseType||t.responseType===exports.ResponseType.JSON)&&(t.responseType=exports.ResponseType.Text),[2,n.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:t}}).then((function(t){var e=new o(t);if(r){try{e.data=JSON.parse(e.data)}catch(t){if(e.ok)throw Error("Failed to parse response `"+e.data+"` as JSON: "+t+";\n              try setting the `responseType` option to `ResponseType.Text` or `ResponseType.Binary` if the API does not return a JSON response.")}return e}return e}))]}))}))},t.prototype.get=function(t,n){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(r){return[2,this.request(e._assign({method:"GET",url:t},n))]}))}))},t.prototype.post=function(t,n,r){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(o){return[2,this.request(e._assign({method:"POST",url:t,body:n},r))]}))}))},t.prototype.put=function(t,n,r){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(o){return[2,this.request(e._assign({method:"PUT",url:t,body:n},r))]}))}))},t.prototype.patch=function(t,n){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(r){return[2,this.request(e._assign({method:"PATCH",url:t},n))]}))}))},t.prototype.delete=function(t,n){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(r){return[2,this.request(e._assign({method:"DELETE",url:t},n))]}))}))},t}();function s(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,n.invokeTauriCommand({__tauriModule:"Http",message:{cmd:"createClient",options:t}}).then((function(t){return new i(t)}))]}))}))}var u=null;function a(t,n){var r;return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(o){switch(o.label){case 0:return null!==u?[3,2]:[4,s()];case 1:u=o.sent(),o.label=2;case 2:return[2,u.request(e._assign({url:t,method:null!==(r=null==n?void 0:n.method)&&void 0!==r?r:"GET"},n))]}}))}))}var p=Object.freeze({__proto__:null,getClient:s,fetch:a,Body:r,Client:i,Response:o,get ResponseType(){return exports.ResponseType}});exports.Body=r,exports.Client=i,exports.Response=o,exports.fetch=a,exports.getClient=s,exports.http=p;
